<div ng-if="unitLoaded">
  <div class="row">
    <div class="col-lg-4 col-lg-push-8">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Target Grade</h3>
          </div>
          <div class="panel-body text-center">
            <div class="dropdown" dropdown is-open="status.isopen">
              <button id="targetGradeButton" type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                {{grades[project.target_grade]}} <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" style="left: 25%; right: 25%;" role="menu">
                <li ng-repeat="grade in grades" ng-click="chooseGrade($index); status.isopen=false"><a>{{grade}}</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Task List</h3>
          </div>
          <div class="panel-body">
            <student-unit-tasks project="project" on-change="updateBurndownChart" student-project-id="studentProjectId" task-def="taskDef" unit="unit" assessing-unit-role="assessingUnitRole" on-select="showTaskView"></student-unit-tasks>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-8 col-lg-pull-4">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Burndown Chart
              <br>
              <small>The Burndown chart shows how much work remains for you to achieve your target grade. Aim to keep your <i>Complete</i> line close to or ahead of the <i>Target</i> line to keep on track.</small>
            </h3>
          </div>
          <div class="panel-body">
            <div class="burndown-chart" ng-if="projectLoaded">
          		<nvd3-line-chart
          			data="project.burndown_chart_data"
          			id="burndownId"
          			width="500"
          			height="440"
          			showXAxis="true"
          			showYAxis="true"
          			showLegend="true"
          			tooltips="true"
          			useInteractiveGuideline="true"
          			margin="{left:80,top:50,bottom:50,right:10}"
          			xAxisTickFormat="xAxisTickFormat_Date_Format()"
          			yAxisLabel="Tasks Remaining"
          			yAxisTickFormat="yAxisTickFormat_Percent_Format()"
          			color="colorFunction()"
          			legendColor="colorFunction()"
          			y="yAxisClipNegBurndown()"
          			x="xAxisClipNegBurndown()"
          			forcex="[{{lateEndDate()}}]">
          			<svg></svg>
          		</nvd3-line-chart>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 	    <div ng-show="showBack">
	    	<a href="#/units?unitRole={{assessingUnitRole.id}}">Back</a>
	    </div>
 -->